$(document).on('page:update', function() {
  $('[data-toggle="tooltip"]').tooltip();

  $('#general_agency_id').on('change', function() {
    check_allow_assign();
  });

  $("input[name='employer_ids[]']").on('change', function() {
    check_allow_assign();
  });
});

function check_allow_assign() {
  var allow_assign = ($('#general_agency_id').val() != undefined && $('#general_agency_id').val() != "") && $("[name='employer_ids[]']").is(':checked');

  if (allow_assign){
    $('#assign_general_agency').removeAttr("disabled");
  }else{
    $('#assign_general_agency').attr("disabled","disabled");
  }
}

$(document).on('click', 'input#select_all_tag', function(){
  if($(this).is(':checked')){
    $('input.employer_id_checkbox').prop('checked', true);
  }else{
    $('input.employer_id_checkbox').removeProp('checked');
  }
  check_allow_assign();
});
